<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProgIndir - GÃ¼venilir YazÄ±lÄ±m ArÅŸivi</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f0f2f5;
            --card-bg: rgba(255, 255, 255, 0.75);
            --text: #1a1a1a;
            --primary: #4361ee;
            --success: #06d6a0;
            --shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        .dark-mode {
            --bg: #121212;
            --card-bg: rgba(30, 30, 30, 0.8);
            --text: #e0e0e0;
        }
        .dark-mode header, .dark-mode nav { opacity: 0.95; }
        .dark-mode .card, .dark-mode .cat-btn { background: rgba(50,50,50,0.9); border-color: #444; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: var(--text); line-height: 1.6; transition: 0.3s; }
        header { background: linear-gradient(135deg, var(--primary), #3f37c9); color: white; text-align: center; padding: 80px 20px 40px; position: relative; }
        header h1 { font-size: 3.5em; margin: 0; }
        header p { font-size: 1.4em; opacity: 0.9; }
        #darkModeToggle { position: absolute; top: 20px; left: 20px; background: none; border: none; font-size: 1.8em; cursor: pointer; }
        .search-hero { max-width: 700px; margin: 30px auto 0; }
        .search-hero input { width: 100%; padding: 18px 24px; font-size: 1.2em; border: none; border-radius: 50px; box-shadow: var(--shadow); outline: none; }

        .category-filter { text-align: center; margin: 30px 0; }
        .cat-btn { background: white; border: 1px solid #ddd; padding: 10px 18px; margin: 5px; border-radius: 50px; cursor: pointer; transition: 0.3s; }
        .cat-btn.active, .cat-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

        .slider-container { max-width: 1300px; margin: 40px auto; overflow: hidden; border-radius: 20px; box-shadow: var(--shadow); position: relative; }
        .slider { display: flex; transition: transform 0.6s ease; }
        .slide { min-width: 100%; height: 450px; background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; position: relative; }
        .slide::before { content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.5); }
        .slide-content { position: relative; text-align: center; padding: 20px; max-width: 800px; }
        .slide h2 { font-size: 3em; margin: 0 0 15px; }
        .slide p { font-size: 1.5em; margin: 0 0 25px; }
        .slide-btn { background: var(--success); color: white; padding: 14px 32px; border-radius: 50px; text-decoration: none; font-weight: 600; }
        .prev, .next { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,0.5); color: white; border: none; padding: 15px; font-size: 2em; cursor: pointer; border-radius: 50%; }
        .prev { left: 20px; } .next { right: 20px; }
        .dots { text-align: center; padding: 15px; background: rgba(0,0,0,0.3); }
        .dot { display: inline-block; width: 12px; height: 12px; margin: 0 6px; background: #bbb; border-radius: 50%; cursor: pointer; }
        .dot.active { background: var(--success); }

        nav { background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 20px rgba(0,0,0,0.05); }
        nav a { margin: 0 20px; color: var(--text); text-decoration: none; font-weight: 600; }

        .container { max-width: 1300px; margin: 50px auto; padding: 0 20px; }
        .section-title { text-align: center; font-size: 2em; margin-bottom: 40px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 30px; }
        .card { background: var(--card-bg); backdrop-filter: blur(10px); border-radius: 20px; overflow: hidden; box-shadow: var(--shadow); transition: all 0.4s ease; }
        .card:hover { transform: translateY(-15px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .card-img { height: 200px; background-size: cover; background-position: center; }
        .card-content { padding: 25px; }
        .card h3 a { color: var(--primary); text-decoration: none; font-size: 1.4em; }
        .meta { font-size: 0.95em; color: #888; margin: 15px 0; }
        .downloads { font-size: 0.9em; color: var(--success); font-weight: bold; }
        .download-btn { display: block; background: var(--success); color: white; text-align: center; padding: 14px; border-radius: 12px; text-decoration: none; font-weight: 600; }
        footer { text-align: center; padding: 50px; color: #666; font-size: 0.9em; }
    </style>
</head>
<body>

<header>
    <button id="darkModeToggle">ðŸŒ™</button>
    <h1>ProgIndir</h1>
    <p>GÃ¼venilir ve GÃ¼ncel YazÄ±lÄ±m ArÅŸivi</p>
    <div class="search-hero">
        <input type="text" id="searchInput" placeholder="Program ara...">
    </div>
</header>

<div class="category-filter">
    <button class="cat-btn active" data-cat="all">TÃ¼mÃ¼</button>
    <button class="cat-btn" data-cat="AntivirÃ¼s">AntivirÃ¼s</button>
    <button class="cat-btn" data-cat="Ä°nternet TarayÄ±cÄ±">TarayÄ±cÄ±</button>
    <button class="cat-btn" data-cat="Medya OynatÄ±cÄ±">Medya</button>
    <button class="cat-btn" data-cat="SÄ±kÄ±ÅŸtÄ±rma AraÃ§larÄ±">SÄ±kÄ±ÅŸtÄ±rma</button>
    <button class="cat-btn" data-cat="Ofis ProgramlarÄ±">Ofis</button>
    <button class="cat-btn" data-cat="Grafik & TasarÄ±m">Grafik</button>
    <button class="cat-btn" data-cat="Oyunlar">Oyunlar</button>
</div>

<div class="slider-container">
    <div class="slider" id="slider"></div>
    <button class="prev" onclick="changeSlide(-1)">&#10094;</button>
    <button class="next" onclick="changeSlide(1)">&#10095;</button>
    <div class="dots" id="dotsContainer"></div>
</div>

<nav>
    <a href="#">Ana Sayfa</a>
    <a href="#">Kategoriler</a>
    <a href="#">PopÃ¼ler</a>
    <a href="#">Yeni</a>
    <a href="#">Ä°letiÅŸim</a>
</nav>

<div class="container">
    <h2 class="section-title">TÃ¼m Programlar</h2>
    <div class="grid" id="programGrid"></div>
</div>

<footer>
    <p>&copy; 2026 ProgIndir. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
</footer>

<script>
    // Dark Mode
    const darkModeToggle = document.getElementById('darkModeToggle');
    if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.classList.add('dark-mode');
        darkModeToggle.textContent = 'â˜€ï¸';
    }
    darkModeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');
        if (document.body.classList.contains('dark-mode')) {
            localStorage.setItem('darkMode', 'enabled');
            darkModeToggle.textContent = 'â˜€ï¸';
        } else {
            localStorage.setItem('darkMode', 'disabled');
            darkModeToggle.textContent = 'ðŸŒ™';
        }
    });

    let slideIndex = 0;
    let currentCategory = 'all';

    function filterCategory(cat) {
        currentCategory = cat;
        document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
        document.querySelector(`.cat-btn[data-cat="${cat === 'all' ? 'all' : cat}"]`).classList.add('active');
        loadPrograms();
    }

    document.querySelectorAll('.cat-btn').forEach(btn => {
        btn.addEventListener('click', () => filterCategory(btn.getAttribute('data-cat') || 'all'));
    });

    function incrementDownload(index) {
        let programs = JSON.parse(localStorage.getItem('programs')) || [];
        if (programs[index]) {
            programs[index].downloads = (programs[index].downloads || 0) + 1;
            localStorage.setItem('programs', JSON.stringify(programs));
            loadPrograms();
        }
    }

    function loadPrograms() {
        let programs = JSON.parse(localStorage.getItem('programs')) || [];
        programs.sort((a, b) => (b.downloads || 0) - (a.downloads || 0));

        const grid = document.getElementById('programGrid');
        const slider = document.getElementById('slider');
        const dotsContainer = document.getElementById('dotsContainer');
        grid.innerHTML = '';
        slider.innerHTML = '';
        dotsContainer.innerHTML = '';

        const featured = programs.filter(p => p.featured);
        const filtered = currentCategory === 'all' ? programs : programs.filter(p => p.category === currentCategory);

        // Slider
        if (featured.length > 0) {
            featured.forEach((p, i) => {
                const slide = document.createElement('div');
                slide.className = 'slide';
                slide.style.backgroundImage = `url('${p.image}')`;
                slide.innerHTML = `<div class="slide-content">
                    <h2>${p.name}</h2>
                    <p>${p.description.substring(0, 120)}...</p>
                    <a href="\( {p.downloadLink}" target="_blank" onclick="event.preventDefault(); incrementDownload( \){programs.indexOf(p)}); window.open('${p.downloadLink}', '_blank');" class="slide-btn">Hemen Ä°ndir</a>
                </div>`;
                slider.appendChild(slide);

                const dot = document.createElement('span');
                dot.className = 'dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => currentSlide(i);
                dotsContainer.appendChild(dot);
            });
        } else {
            slider.innerHTML = '<div class="slide" style="background:#4361ee;color:white;"><div class="slide-content"><h2>HoÅŸ Geldiniz!</h2><p>Admin panelinden program ekleyin.</p></div></div>';
        }

        // Kartlar â€“ HATA BURADA DÃœZELTÄ°LDÄ°!
        filtered.forEach((p, i) => {
            const actualIndex = programs.indexOf(p);
            const card = document.createElement('div');
            card.className = 'card';
            card.setAttribute('data-category', p.category || '');
            card.innerHTML = `
                <div class="card-img" style="background-image: url('${p.image}');"></div>
                <div class="card-content">
                    <h3><a href="detail.html?id=\( {actualIndex}"> \){p.name}</a></h3>
                    <p>${p.description.substring(0, 100)}...</p>
                    <div class="meta">${p.size} â€¢ ${p.license} â€¢ ${p.category || 'Kategorisiz'}</div>
                    <div class="downloads">${p.downloads || 0} indirme</div>
                    <a href="\( {p.downloadLink}" target="_blank" onclick="event.preventDefault(); incrementDownload( \){actualIndex}); window.open('${p.downloadLink}', '_blank');" class="download-btn">Ä°ndir</a>
                </div>
            `;
            grid.appendChild(card);
        });

        if (featured.length > 1) setInterval(() => changeSlide(1), 6000);
        showSlide(0);
    }

    function showSlide(n) {
        const slides = document.querySelectorAll('.slide');
        slideIndex = (n + slides.length) % slides.length;
        document.getElementById('slider').style.transform = `translateX(-${slideIndex * 100}%)`;
        document.querySelectorAll('.dot').forEach((dot, i) => dot.classList.toggle('active', i === slideIndex));
    }
    function changeSlide(n) { showSlide(slideIndex + n); }
    function currentSlide(n) { showSlide(n); }

    document.getElementById('searchInput').addEventListener('input', function() {
        const query = this.value.toLowerCase();
        document.querySelectorAll('.card').forEach(card => {
            const name = card.querySelector('h3 a').textContent.toLowerCase();
            const showBySearch = name.includes(query);
            const showByCat = currentCategory === 'all' || card.getAttribute('data-category') === currentCategory;
            card.style.display = (showBySearch && showByCat) ? '' : 'none';
        });
    });

    loadPrograms();
</script>
</body>
</html>
